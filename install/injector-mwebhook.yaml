apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  annotations:
  generation: 2
  labels:
    app: grape-injector
  name: grape-injector
webhooks:
- admissionReviewVersions:
  - v1beta1
  - v1
  clientConfig:
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURLekNDQWhPZ0F3SUJBZ0lSQVBtWGJseWpVWWlUaW5JbjQzUzU4aDR3RFFZSktvWklodmNOQVFFTEJRQXcKRWpFUU1BNEdBMVVFQ2hNSFFXTnRaU0JEYnpBZ0Z3MDNNREF4TURFd01EQXdNREJhR0E4eU1EZzBNREV5T1RFMgpNREF3TUZvd0VqRVFNQTRHQTFVRUNoTUhRV050WlNCRGJ6Q0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQCkFEQ0NBUW9DZ2dFQkFObUR1VDNFUVowNWZqV29PV0JrRVZrKzh3eVNRb05yZmhzaDF0ZjV4MExXR093Z1k5UWgKa1hxS1ZFR25FSlJBV0VwODlGWEdQSDF3bDFYUUVpaUk5dkMxdGZuSU11UjlOY21YdlMvNmJZekFvM1BPTHJ0RQpUc2dmWnhZQkpWSDlsaFhtMDVDNVBFL2YxZ1F2MXd4RU8weDJUelNmZ1c0RjRMcEJKNHJVc2lKbFpuTzZRSGpyCnJPVGZUV3o2bUp1MTVPWkMrM3FFbzArQXN0b2pQK3Q0d05KSHd3clNwSGVKb0tla1RBVVJIaTlaamM5dFFxTmkKbEw0b0pHYmVkOGpEcThjazZaSGRDU0JlU0lEd2pOT1cwWEZ1NFllanFIUWNPeUg0M1A0dlQwc29XTTFvcVlaagpwV3NKSUx3dWNvY2gveW9mZGNpZkV0M09qL094QjlXYzdQRUNBd0VBQWFONk1IZ3dEZ1lEVlIwUEFRSC9CQVFECkFnS2tNQk1HQTFVZEpRUU1NQW9HQ0NzR0FRVUZCd01CTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME8KQkJZRUZOd3VmNmpNZVZVazNCdnpST2pIMXBUeGJ6ekVNQ0VHQTFVZEVRUWFNQmlDRm1keVlYQmxaQzVuY21GdwpaWE41YzNSbGJTNXpkbU13RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUlyd3pOM3pVVGZEU3pFNlk4ZVBWbllICmRLZ1FSek1Pbi83bHl1d2E4bGY1TTBVU1BEV3BqZ0lXbERHWGt5Y3lrNHdscmxPNnRLWVRpRlQvaVRJNWsrajUKREhMVzAyRmtnV3Avb1pvQzFWbDBIS25iMnlMUEo1ZzJUbmNtejZRd3FiZlorYmFLbkpiS2IrWVBWeWRaWHlVQQp1RmVVd3ArVUNoNVIyMEhtSkxQS2NaMVJnMnJmTUI2YjBJN2gwMzdQTW9IQVBGNENYZ1M4Y2NBY3dobEZpY0paCmNTZXBqdFBLcndjNnErWDhxd0RQN0ovSkx5QStMQnpQKzJSZG8yWXdXMldTTjYvNENINnJvajFFTmpidlNZblkKTzZhdTdZTS9Udkd6dVUvR2dmRHJzbVhnVTJDSHVoTmgxZ2lXZytKSVE1VEd5TWtxSzlyQ2xYZzZzdlNKaEJjPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    service:
      name: graped
      namespace: grape-system
      path: /inject
      port: 8082
  failurePolicy: Fail
  matchPolicy: Equivalent
  name: pod.injector.grape
  # namespaceSelector:
  #   matchExpressions:
  #   - key: nt-injection
  #     operator: In
  #     values:
  #     - "true"
  objectSelector:
    matchExpressions:
    - key: grape/injection
      operator: In
      values:
      # - "true"
      - "enable"
  reinvocationPolicy: Never
  rules:
  - apiGroups:
    - ""
    apiVersions:
    - v1
    operations:
    - CREATE
    resources:
    - pods
    scope: '*'
  sideEffects: None
  timeoutSeconds: 10