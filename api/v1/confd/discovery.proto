syntax = "proto3";

import "grape/api/v1/confd/types.proto";

package grape.api.v1.confd;
option go_package = "grape/api/v1/confd";

message Discovery {
  string namespace = 1;
  string service = 2;
  string group = 3;
}

message DownloadRequest {
  string namespace = 1;
  string service = 2;
  string group = 3;
  int64 loadVersion = 4;
}

message DownloadResponse {
  int32 code = 1;
  string message = 2;
  Configs configs = 3;
}

service ConfdServer {
  rpc StreamResources(Discovery) returns (stream Configs) {}
  rpc Download(DownloadRequest) returns (DownloadResponse){}
}
